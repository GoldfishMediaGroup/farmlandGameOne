const config={wrapperSelector:".wrapper",animationPath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/jump.json",animationSize:{desktop:{width:556,height:444},mobile:{width:292,height:208}},snowTrails:{enabled:!0,lottiePath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/snow.json",size:{desktop:{width:556,height:444},mobile:{width:292,height:208}},opacity:1,zIndex:"1001",showOnMovement:!0,fadeInDuration:500,fadeOutDuration:1e3,trailDelay:300,reflectWithMain:!0},movement:{enabled:!0,speeds:{desktop:{horizontal:120,vertical:70},mobile:{horizontal:100,vertical:60}},moveInViewport:!0,startDelay:1e3,startPosition:{x:"left",y:"top"},bounceAtEdges:!0,edgeMargin:0,flipAnimation:!0,flipDuration:300,pauseOnHover:!0,oneTime:!1,restartOnBottom:!0,restartDelay:1e4,bottomThreshold:10},delays:{containerAppearance:500,animationStart:500,movementStart:2e3},animationStyles:{pointerEvents:"none",zIndex:"1001",transformOrigin:"center center",willChange:"transform"}};function getDeviceType(){const t=window.matchMedia("(max-width: 768px)").matches,e=window.matchMedia("(min-width: 769px) and (max-width: 1024px)").matches;return t?"mobile":e?"tablet":"desktop"}function getAnimationSize(){const t=getDeviceType();return config.animationSize[t]||config.animationSize.desktop}function getSnowTrailsSize(){const t=getDeviceType();return config.snowTrails.size[t]||config.snowTrails.size.desktop}function getMovementSpeeds(){const t=getDeviceType(),e=config.movement.speeds[t]||config.movement.speeds.desktop;return{horizontalSpeed:e.horizontal,verticalSpeed:e.vertical}}document.addEventListener("DOMContentLoaded",(function(){getDeviceType();const t=document.querySelector(config.wrapperSelector);if(!t)return;"static"===window.getComputedStyle(t).position&&(t.style.position="relative");const e=getAnimationSize(),n=getSnowTrailsSize(),i=getMovementSpeeds(),o=function(t){const e=document.createElement("div");return e.className="lottie-mascot-main",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",transition:"opacity 0.5s ease-in",pointerEvents:"none",...config.animationStyles}),e}(e),a=function(t){if(!config.snowTrails.enabled)return null;const e=document.createElement("div");return e.className="snow-trails-container",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",pointerEvents:"none",zIndex:config.snowTrails.zIndex,transformOrigin:"center center",transition:`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,textDecoration:"none",display:"block"}),e.addEventListener("mouseenter",(function(){e.style.opacity="0.8"})),e.addEventListener("mouseleave",(function(){e.style.opacity=config.snowTrails.opacity})),e}(n);function s(t){t&&(t.style.position="fixed",t.style.left="0px",t.style.top="70px")}function r(t,e,n=!1){return t?"undefined"==typeof lottie?function(t,e,n){const i=document.createElement("script");return i.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js",i.onload=function(){return l(t,e,n)},document.head.appendChild(i),null}(t,e,n):l(t,e,n):null}function l(t,e,n=!1){const i=lottie.loadAnimation({container:t,renderer:"svg",loop:n,autoplay:!0,path:e});return i.addEventListener("DOMLoaded",(function(){n||(t.style.opacity="1")})),i}setTimeout((()=>{t.appendChild(a),t.appendChild(o),config.movement.moveInViewport&&(s(o),s(a)),setTimeout((()=>{const t=r(o,config.animationPath),n=r(a,config.snowTrails.lottiePath,!0);if(config.movement.enabled){const s=config.delays?.movementStart||config.movement.startDelay;setTimeout((()=>{!function(t,e,n,i,o,a,s){let r=null,l=null,c=!1,m=!1,f=null,d="right",u="down",p=0,g=!1,h=!1,y=null,w=null,v=null,x=null,$=null,T=!0,S=!1,M=!1,b=!1,z=0,D=0,A=1,P=0;const E=300;const O=s.horizontalSpeed,F=s.verticalSpeed;function I(){const t=window.innerHeight,e=o.height,n=config.movement.bottomThreshold||10;return D+e>=t-n}function L(){w={x:z,y:D},v=d,x=A,$=config.delays?.movementStart||config.movement.startDelay}function X(){w&&(z=w.x,D=w.y,d=v,A=x,t.style.transform=`translate(${z}px, ${D}px) scaleX(${A})`)}function j(){h||g||(h=!0,T=!1,r&&(cancelAnimationFrame(r),r=null),e&&S&&q(),t.style.transition="opacity 1s ease-out",t.style.opacity="0",n&&n.pause(),i&&i.pause(),y=setTimeout((()=>{b=!1,M=!1,S=!1,l=null,m=!1,f=null,X(),u="down",t.style.transition="opacity 0.8s ease-in",t.style.opacity="1",n&&n.goToAndPlay(0),i&&i.goToAndPlay(0),T?(h=!1,r=requestAnimationFrame(R)):setTimeout((()=>{h=!1,r=requestAnimationFrame(R)}),$)}),config.movement.restartDelay))}function k(){if(!e||M||!config.snowTrails.showOnMovement)return;M=!0;const t=z,n=D;e.style.transform=`translate(${t}px, ${n}px) scaleX(${A})`,setTimeout((()=>{!e||g||h||(e.style.transition=`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,e.style.opacity=config.snowTrails.opacity,S=!0)}),config.snowTrails.trailDelay)}function q(){e&&S&&(S=!1,e.style.transition=`opacity ${config.snowTrails.fadeOutDuration}ms ease-out`,e.style.opacity="0",setTimeout((()=>{!e||g||S||h||(M=!1)}),config.snowTrails.fadeOutDuration+100))}function C(){const e=window.innerWidth,n=window.innerHeight,i=o.width,a=o.height;if("left"===config.movement.startPosition.x)z=0,d="right",A=1;else if("right"===config.movement.startPosition.x)z=e-i,d="left",A=-1;else if("random"===config.movement.startPosition.x){Math.random()>.5?(z=20,d="right",A=1):(z=e-i-20,d="left",A=-1)}else z=parseFloat(config.movement.startPosition.x)||0,d="right",A=1;if("random"===config.movement.startPosition.y)D=Math.random()*(n-a-100)+50;else if("top"===config.movement.startPosition.y)D=20;else if("bottom"===config.movement.startPosition.y)D=n-a-20;else if("center"===config.movement.startPosition.y)D=(n-a)/2;else if("string"==typeof config.movement.startPosition.y&&config.movement.startPosition.y.includes("%")){const t=parseFloat(config.movement.startPosition.y)/100;D=(n-a)*t}else D=parseFloat(config.movement.startPosition.y)||20;u="down",t.style.transform=`translate(${z}px, ${D}px) scaleX(${A})`,L()}function H(t,e,n){if(!config.movement.bounceAtEdges)return!1;const i=config.movement.edgeMargin;return"left"===d&&t<=i||"right"===d&&t>=e-n-i}function W(t,e,n){if(!config.movement.bounceAtEdges)return!1;const i=config.movement.edgeMargin||0;return"down"===u&&t>=e-n-i?!config.movement.restartOnBottom:"up"===u&&t<=i}function B(t,e,n){return!1}function N(){m||(m=!0,f=performance.now(),p=0,P=f,d="right"===d?"left":"right")}function V(){u="up"}function G(n){if(!f)return!1;p=Math.min((n-f)/config.movement.flipDuration,1);const i="right"===d?1:-1,o=p<.5?2*p*p:1-Math.pow(-2*p+2,2)/2;if(A+=(i-A)*o,t.style.transform=`translate(${z}px, ${D}px) scaleX(${A})`,e&&S){const t=z,n=D;e.style.transform=`translate(${t}px, ${n}px) scaleX(${A})`}if(p>=1){if(m=!1,f=null,p=0,A=i,t.style.transform=`translate(${z}px, ${D}px) scaleX(${A})`,e&&S){const t=z,n=D;e.style.transform=`translate(${t}px, ${n}px) scaleX(${A})`}return!1}return!0}function J(n){if(!l)return void(l=n);const i=(n-l)/1e3;l=n;const a=O*i,s=F*i,r=Math.abs(a)>.1||Math.abs(s)>.1;r&&!b&&(b=!0,k()),!r&&b&&S&&q(),r&&b&&!S&&!M&&k(),"right"===d?z+=a:z-=a,"down"===u?D+=s:D-=s;const c=window.innerWidth,f=window.innerHeight,p=o.width,g=o.height;if(config.movement.restartOnBottom&&I()&&!h)return void j();const y=B(D,f,g);if(!y){const t=H(z,c,p),e=W(D,f,g);if(t&&!m&&n-P>E&&(N(),z="right"===d?Math.max(z,0):Math.min(z,c-p)),e&&n-P>E){V();const t=config.movement.edgeMargin||0;D="down"===u?Math.max(D,t):Math.min(D,f-g-t)}}if(y||h||(z=Math.max(0,Math.min(z,c-p)),D=Math.max(0,Math.min(D,f-g))),t.style.transform=`translate(${z}px, ${D}px) scaleX(${A})`,e&&S){const t=z,n=D;e.style.transform=`translate(${t}px, ${n}px) scaleX(${A})`}}function K(){if(g||!config.movement.oneTime)return!1;const n=window.innerWidth,i=window.innerHeight,a=o.width,s=o.height;return!!(z+a<0||z>n||D+s<0||D>i)&&(g=!0,e&&S&&q(),t.style.transition="opacity 0.8s ease-out",t.style.opacity="0",setTimeout((()=>{r&&(cancelAnimationFrame(r),r=null)}),1e3),!0)}function Q(){r=requestAnimationFrame(R)}function R(t){if(c||g||h)g||h||(r=requestAnimationFrame(R));else{if(m){if(G(t))return J(t),void(r=requestAnimationFrame(R))}J(t),K(),g||h||(r=requestAnimationFrame(R))}}t.style.opacity="1",C(),T&&Q();config.movement.pauseOnHover&&(t.addEventListener("mouseenter",(()=>{c=!0,t.style.filter="brightness(0.8) saturate(0.8)",t.style.transition="filter 0.3s",e&&S&&q()})),t.addEventListener("mouseleave",(()=>{c=!1,t.style.filter="brightness(1) saturate(1)",!b||S||M||k()})));let U=window.innerWidth;window.addEventListener("resize",(()=>{if(g)return;const n=window.innerWidth;if(n===U)return;U=n,y&&(clearTimeout(y),y=null);const i=getAnimationSize(),o=getSnowTrailsSize(),a=getMovementSpeeds();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,e&&(e.style.width=`${o.width}px`,e.style.height=`${o.height}px`),O=a.horizontalSpeed,F=a.verticalSpeed,h=!1,r&&cancelAnimationFrame(r),l=null,r=requestAnimationFrame(R)}))}(o,a,t,n,e,0,i)}),s)}}),config.delays.animationStart)}),config.delays.containerAppearance)}));